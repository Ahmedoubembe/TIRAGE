<div class="container">
  <div class="categories-card">
    <h1>Sélectionnez une catégorie</h1>
    
    <div class="categories-liste">
      <div 
        *ngFor="let categorie of categories"
        class="categorie-item"
        [class.selectionnee]="categorieChoisie === categorie.categorie"
        [class.tiree]="categorie.tiree"
        (click)="!categorie.tiree && selectionnerCategorie(categorie.categorie)">
        
        <div class="categorie-info">
          <h3>{{ categorie.categorie }}</h3>
          <div class="details">
            <span>Intervalle Scorring: {{ categorie.interval}}</span>
            <span>Gagnants: {{ categorie.nombre_gagnants }}</span>
            <span class="prix">{{ categorie.prix }}</span>
          </div>
        </div>
        
        <div class="statut" *ngIf="categorie.tiree">
          Tirage effectué
        </div>
      </div>
    </div>

    <button
      class="btn-lancer"
      [disabled]="!categorieChoisie"
      (click)="ouvrirModalConfidentialite()">
      Lancer le tirage
    </button>
  </div>

  <!-- Modal de confidentialité -->
  <div class="modal-overlay" *ngIf="afficherModal" (click)="fermerModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>Options de confidentialité</h2>
      <p class="modal-description">Choisissez les informations à masquer pendant le tirage :</p>

      <div class="options-container">
        <label class="option-item">
          <input
            type="checkbox"
            [(ngModel)]="masquerNom"
            class="checkbox-input">
          <div class="option-details">
            <span class="option-titre">Masquer une partie du nom</span>
            <span class="option-exemple">Exemple : Prénom N***</span>
          </div>
        </label>

        <label class="option-item">
          <input
            type="checkbox"
            [(ngModel)]="masquerNumero"
            class="checkbox-input">
          <div class="option-details">
            <span class="option-titre">Masquer le numéro de téléphone</span>
            <span class="option-exemple">Exemple : +222 44 XX XX XX</span>
          </div>
        </label>
      </div>

      <div class="modal-actions">
        <button class="btn-annuler" (click)="fermerModal()">
          Annuler
        </button>
        <button class="btn-confirmer" (click)="confirmerEtLancerTirage()">
          Confirmer et lancer
        </button>
      </div>
    </div>
  </div>
</div>