<div class="overlay-gagnants" [class.plein-ecran]="gagnantsAffiches.length > 0 && !tirageEnCours">
  <!-- FEUX D'ARTIFICE ET EXPLOSIONS CONTINUES -->
  <div class="confettis" *ngIf="afficherConfettis">
    <!-- Confettis qui tombent en continu (100 particules) -->
    <div class="confetti" *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100]"></div>

    <!-- Explosions d'etoiles dorees (positions variees) -->
    <div class="explosion-etoile" style="left: 20%; top: 30%;"></div>
    <div class="explosion-etoile" style="left: 80%; top: 25%;"></div>
    <div class="explosion-etoile" style="left: 50%; top: 40%;"></div>
    <div class="explosion-etoile" style="left: 30%; top: 60%;"></div>
    <div class="explosion-etoile" style="left: 70%; top: 55%;"></div>
    <div class="explosion-etoile" style="left: 15%; top: 70%;"></div>
    <div class="explosion-etoile" style="left: 85%; top: 65%;"></div>
    <div class="explosion-etoile" style="left: 45%; top: 20%;"></div>

    <!-- Gerbes de particules qui jaillissent -->
    <div class="gerbe-particules gerbe-gauche"></div>
    <div class="gerbe-particules gerbe-droite"></div>
    <div class="gerbe-particules gerbe-centre"></div>

    <!-- Fontaines de lumiere doree -->
    <div class="fontaine-lumiere" style="left: 10%;"></div>
    <div class="fontaine-lumiere" style="left: 90%;"></div>
    <div class="fontaine-lumiere" style="left: 50%;"></div>

    <!-- Pluie d'etoiles scintillantes -->
    <div class="pluie-etoiles">
      <div class="etoile-tombante" *ngFor="let i of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]"></div>
    </div>

    <!-- Cercles d'explosion qui se propagent -->
    <div class="onde-choc" style="left: 25%; top: 35%;"></div>
    <div class="onde-choc" style="left: 75%; top: 45%;"></div>
    <div class="onde-choc" style="left: 50%; top: 60%;"></div>

    <!-- Spirales de particules -->
    <div class="spirale-particules spirale-1"></div>
    <div class="spirale-particules spirale-2"></div>
  </div>

  <div class="gagnants-panel">
    <div class="titre-wrapper">
      <h1 class="titre-felicitations" [class.langue-ar]="langueFelicitations === 'ar'">
        <!-- Étoiles scintillantes autour du titre -->
        <!-- <span class="etoile-gauche">✨</span>
        {{ titreFelicitations }}
        <span class="etoile-droite">✨</span> -->
        <span class="arc-etoiles-gauche">
          <span class="etoile etoile-1">&#9733;</span>
          <span class="etoile etoile-2">&#9733;</span>
          <span class="etoile etoile-3">&#9733;</span>
        </span>
        {{ titreFelicitations }}
        <span class="arc-etoiles-droite">
          <span class="etoile etoile-1">&#9733;</span>
          <span class="etoile etoile-2">&#9733;</span>
          <span class="etoile etoile-3">&#9733;</span>
        </span>
      </h1>
    </div>

    <div class="gagnants-liste">
      <div
        *ngFor="let gagnant of gagnantsAffiches; let i = index"
        class="gagnant-item"
        [class.nouveau-gagnant]="i === gagnantsAffiches.length - 1 && !tirageTermine"
        [class.gagnant-historique]="i !== gagnantsAffiches.length - 1"
        [class.cliquable]="!tirageEnCours"
        [class.joint]="gagnant.joint"
        (click)="ouvrirModaleContact(gagnant)">

        <!-- Point vert en haut à droite pour le dernier gagnant -->
        <div class="badge-nouveau" *ngIf="i === gagnantsAffiches.length - 1 && !tirageTermine"></div>

        <div class="gagnant-info">
          <p class="numero">{{ gagnant.numero_telephone }}</p>
          <p class="score">Score: {{ gagnant.score.toFixed(2) }}</p>
          <p class="prix">{{ gagnant.prix }}</p>
        </div>

        <!-- Indicateur discret si déjà marqué comme joint -->
        <div class="indicateur-joint" *ngIf="gagnant.joint && !tirageEnCours">✓</div>
      </div>
    </div>

    <div class="actions">
      <button
        class="btn-gagnant-suivant"
        *ngIf="peutAfficherGagnantSuivant()"
        (click)="onGagnantSuivant()">
        <span class="texte-ar">{{ traductionsBoutons.gagnantSuivant.ar }}</span>
        <span class="texte-fr">{{ traductionsBoutons.gagnantSuivant.fr }}</span>
      </button>

      <button
        class="btn-retour"
        *ngIf="gagnantsAffiches.length > 0 && !tirageEnCours"
        (click)="retourALaSelection()">
        <span class="texte-ar">{{ traductionsBoutons.retour.ar }}</span>
        <span class="texte-fr">{{ traductionsBoutons.retour.fr }}</span>
      </button>
    </div>
  </div>

  <!-- MODALE STATUT CONTACT -->
  <div class="modal-overlay-contact" *ngIf="afficherModaleContact" (click)="fermerModale()">
    <div class="modal-content-contact" (click)="$event.stopPropagation()">
      <div class="modal-header-contact">
        <h2 class="modal-titre">
          <span class="texte-ar">حالة الاتصال</span>
          <span class="texte-fr">Statut du contact</span>
        </h2>
        <button class="btn-fermer-modal" (click)="fermerModale()">×</button>
      </div>

      <div class="modal-body-contact" *ngIf="gagnantSelectionne">
        <p class="modal-question">
          <strong>{{ gagnantSelectionne.numero_telephone }}</strong>
        </p>
        <p class="modal-sous-titre">
          <span class="texte-ar">هل تم الاتصال بالعميل؟</span>
          <span class="texte-fr">Le client a-t-il répondu à l'appel ?</span>
        </p>
      </div>

      <div class="modal-actions-contact">
        <button class="btn-modal btn-joint" (click)="marquerJoint()">
          <span class="texte-ar">نعم - تم الاتصال</span>
          <span class="texte-fr">✓ Joint</span>
        </button>

        <button class="btn-modal btn-non-joint" (click)="marquerNonJoint()">
          <span class="texte-ar">لا - لم يرد</span>
          <span class="texte-fr">✗ Non joint</span>
        </button>

        <button class="btn-modal btn-annuler" (click)="fermerModale()">
          <span class="texte-ar">إلغاء</span>
          <span class="texte-fr">Annuler</span>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="logo-gauche">
  <img src="assets/logo2.jpg" alt="Logo 2">
</div>
<!-- 
<div class="logo-droit">
  <img src="assets/logo2.jpg" alt="Logo 2">
</div> -->